{
  "linksCounter": {
    "samePage": {
      "total": [
        "http://blog.sigman.pl/posts/creating-command-line-tools-with-nodejs"
      ],
      "totalCount": 1,
      "uniqueCount": 1
    },
    "sameHostname": {
      "total": [
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/primers",
        "http://blog.sigman.pl/tips",
        "http://blog.sigman.pl/tutorials",
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/tips",
        "http://blog.sigman.pl/tags/nodejs",
        "http://blog.sigman.pl/tags/javascript",
        "http://blog.sigman.pl/tags/linux",
        "http://blog.sigman.pl/tags/programming",
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/posts/creating-command-line-tools-with-nodejs",
        "http://blog.sigman.pl/posts/couchdb-primer-part-2-design-documents-and-views",
        "http://blog.sigman.pl/posts/couchdb-primer-part-1-the-basics",
        "http://blog.sigman.pl/posts/markdown-basics",
        "http://blog.sigman.pl/posts/using-modules-and-dependency-management-in-javascript-applications-with-amd-require-js",
        "http://blog.sigman.pl/posts/starting-with-air-for-android-and-ios-building-one-app-for-both-platforms",
        "http://blog.sigman.pl/posts/building-mobile-games-in-adobe-air-techniques-used-in-jumping-droid",
        "http://blog.sigman.pl/posts/building-ios-app-with-adobe-air-things-learnt-when-developing-colorbyshape-app",
        "http://blog.sigman.pl/posts/simple-pathfinding-algorithm-in-actionscript-3",
        "http://blog.sigman.pl/posts/box-2-d-basics-part-1",
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/primers",
        "http://blog.sigman.pl/tips",
        "http://blog.sigman.pl/tutorials",
        "http://blog.sigman.pl/tags/couchdb",
        "http://blog.sigman.pl/tags/regex",
        "http://blog.sigman.pl/tags/actionscript",
        "http://blog.sigman.pl/tags/architecture",
        "http://blog.sigman.pl/tags/box-2-d",
        "http://blog.sigman.pl/tags/databases",
        "http://blog.sigman.pl/tags/javascript",
        "http://blog.sigman.pl/tags/keystonejs",
        "http://blog.sigman.pl/tags/linux",
        "http://blog.sigman.pl/tags/mobile",
        "http://blog.sigman.pl/tags/nodejs",
        "http://blog.sigman.pl/tags/nosql",
        "http://blog.sigman.pl/tags/programming"
      ],
      "totalCount": 39,
      "uniqueCount": 27
    },
    "sameDomain": {
      "total": [
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/primers",
        "http://blog.sigman.pl/tips",
        "http://blog.sigman.pl/tutorials",
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/tips",
        "http://blog.sigman.pl/tags/nodejs",
        "http://blog.sigman.pl/tags/javascript",
        "http://blog.sigman.pl/tags/linux",
        "http://blog.sigman.pl/tags/programming",
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/posts/creating-command-line-tools-with-nodejs",
        "http://blog.sigman.pl/posts/couchdb-primer-part-2-design-documents-and-views",
        "http://blog.sigman.pl/posts/couchdb-primer-part-1-the-basics",
        "http://blog.sigman.pl/posts/markdown-basics",
        "http://blog.sigman.pl/posts/using-modules-and-dependency-management-in-javascript-applications-with-amd-require-js",
        "http://blog.sigman.pl/posts/starting-with-air-for-android-and-ios-building-one-app-for-both-platforms",
        "http://blog.sigman.pl/posts/building-mobile-games-in-adobe-air-techniques-used-in-jumping-droid",
        "http://blog.sigman.pl/posts/building-ios-app-with-adobe-air-things-learnt-when-developing-colorbyshape-app",
        "http://blog.sigman.pl/posts/simple-pathfinding-algorithm-in-actionscript-3",
        "http://blog.sigman.pl/posts/box-2-d-basics-part-1",
        "http://blog.sigman.pl/",
        "http://blog.sigman.pl/primers",
        "http://blog.sigman.pl/tips",
        "http://blog.sigman.pl/tutorials",
        "http://blog.sigman.pl/tags/couchdb",
        "http://blog.sigman.pl/tags/regex",
        "http://blog.sigman.pl/tags/actionscript",
        "http://blog.sigman.pl/tags/architecture",
        "http://blog.sigman.pl/tags/box-2-d",
        "http://blog.sigman.pl/tags/databases",
        "http://blog.sigman.pl/tags/javascript",
        "http://blog.sigman.pl/tags/keystonejs",
        "http://blog.sigman.pl/tags/linux",
        "http://blog.sigman.pl/tags/mobile",
        "http://blog.sigman.pl/tags/nodejs",
        "http://blog.sigman.pl/tags/nosql",
        "http://blog.sigman.pl/tags/programming"
      ],
      "totalCount": 39,
      "uniqueCount": 27
    },
    "otherDomain": {
      "total": [
        "https://www.npmjs.com/package/tests2json",
        "https://github.com/wsierakowski/tests2json",
        "https://github.com/wsierakowski/tests2json",
        "https://mochajs.org/",
        "http://chaijs.com/",
        "https://github.com/wsierakowski/tests2json/blob/master/package.json",
        "https://www.npmjs.com/package/commander",
        "https://docs.npmjs.com/files/package.json#bin",
        "https://github.com/wsierakowski/tests2json/blob/master/tests2json.js",
        "https://en.wikipedia.org/wiki/Shebang_%28Unix%29",
        "https://nodejs.org/api/process.html#process_process_stdout",
        "http://stackoverflow.com/questions/13388704/what-is-a-tty-and-how-can-i-enable-it-on-ubuntu",
        "https://www.npmjs.com/package/commander",
        "https://nodejs.org/api/process.html",
        "https://nodejs.org/api/process.html"
      ],
      "totalCount": 15,
      "uniqueCount": 12
    }
  },
  "trzy": "cztery",
  "raz": "dwa",
  "url": "http://blog.sigman.pl/posts/creating-command-line-tools-with-nodejs",
  "body": "<!DOCTYPE html><html><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><title>sigman.pl</title><link rel=\"shortcut icon\" href=\"/favicon.ico\" type=\"image/x-icon\"><link href=\"/styles/site.min.css\" rel=\"stylesheet\"><link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/default.min.css\"><link href=\"http://fonts.googleapis.com/css?family=Open+Sans\" rel=\"stylesheet\" type=\"text/css\"></head><body><header role=\"banner\" class=\"navbar navbar-inverse navbar-fixed-top bs-docs-nav\"><div class=\"container\"><div class=\"navbar-header\"><button type=\"button\" data-toggle=\"collapse\" data-target=\".bs-navbar-collapse\" class=\"navbar-toggle\"><span class=\"sr-only\">Toggle navigation</span><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span></button><a href=\"/\" class=\"logo-link\"><img src=\"/images/sigman.pl.png\" alt=\"sigman.pl\"></a></div><nav role=\"navigation\" class=\"collapse navbar-collapse bs-navbar-collapse\"><form role=\"search\" method=\"get\" action=\"/\" class=\"navbar-form navbar-right\"><div class=\"form-group\"><input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"form-control input-sm\"></div><button type=\"submit\" class=\"btn btn-default btn-sm\">Search</button></form><ul class=\"nav navbar-nav\"><li><a href=\"/\">Latests</a></li><li><a href=\"/primers\">Primers</a></li><li><a href=\"/tips\">Tips</a></li><li><a href=\"/tutorials\">Tutorials</a></li></ul></nav></div><div id=\"nav-btm-line\"></div></header><div id=\"body\"><div class=\"container\"><div class=\"row\"><div class=\"col-sm-8 col-md-9\"><ul class=\"pager\"><li class=\"previous\"><a href=\"/\">&lt; Back to the blog</a></li></ul><article class=\"post-article\"><div class=\"post\"><header><h1>Creating command line tools with Node.js</h1><div class=\"row\"><div class=\"article-icons-group1 col-sm-6 col-md-6\"><span class=\"glyphicon glyphicon-time\"> </span> March 15th, 2016  &#xA0;&#xA0;<span class=\"glyphicon glyphicon-user\"> </span> by sigman  &#xA0;&#xA0;<span class=\"glyphicon glyphicon-cloud-download\"> </span> 1009 </div><div class=\"article-icons-group2 col-sm-6 col-md-6\"><span class=\"glyphicon glyphicon-folder-open\"> </span>&#xA0;&#xA0;<a href=\"/tips\">Tips</a> <span class=\"glyphicon glyphicon-bookmark\"> </span>&#xA0;&#xA0;<a href=\"/tags/nodejs\">nodejs</a>, <a href=\"/tags/javascript\">javascript</a>, <a href=\"/tags/linux\">linux</a>, <a href=\"/tags/programming\">programming</a> </div></div></header><hr><div class=\"brief\"><p class=\"lead\"></p><p>I needed to create an utility that when installed as a global module, it would be both available as a command line tool in bash and&#xA0;as a Node module that could be imported with require function from any Node script. As&#xA0;the command line tool, i wanted it to take input in two ways: take parameters and read input from a file or take piped streams. This tip explains how this can be achieved.</p><p></p></div><div class=\"post\"><hr>\n<h2 id=\"background\">Background</h2>\n<p>Creating command line tools with Node was the initial reason that hooked me in when my journey as Node.JS developer started almost 4 years ago. I recently needed to create a module for converting/parsing tests written in plain text format to JSON, so that they could be imported to the database easily.</p>\n<p>The module is available here on NPM: \n<a href=\"https://www.npmjs.com/package/tests2json\">https://www.npmjs.com/package/tests2json</a> <br>\nor on github:\n<a href=\"https://github.com/wsierakowski/tests2json\">https://github.com/wsierakowski/tests2json</a></p>\n<hr>\n<p>I wanted this module to have the following features:</p>\n<hr>\n<h5 id=\"1-import-as-a-node-module-\">1. <strong>Import as a Node module</strong></h5>\n<p>When installed with:</p>\n<pre><code>npm install tests2json\n</code></pre><p>I should be able to import it in a standard way with the require:</p>\n<pre><code>var t2j = require(&apos;tests2json&apos;)\n</code></pre><hr>\n<h5 id=\"2-use-as-command-line-tool-\">2. <strong>Use as command line tool</strong></h5>\n<p>When installed globally </p>\n<pre><code>npm install tests2json -g\n</code></pre><p>I should be able to run it from command line interface (CLI) as any other program available from bash.</p>\n<hr>\n<h5 id=\"3-accept-parameters-in-cli-\">3. <strong>Accept parameters in CLI</strong></h5>\n<p>When run from CLI it should take both short: </p>\n<pre><code>$ tests2json -h\n</code></pre><p>and long parameters: </p>\n<pre><code>$ tests2json --help\n</code></pre><p>and display verbose help to the user. \nTwo key parameters would be the <code>input</code> to specify a path where the text file with tests should be read from and the <code>output</code> for a path which the json output should be saved to.</p>\n<hr>\n<h5 id=\"4-accept-piped-streams-\">4. <strong>Accept piped streams</strong></h5>\n<p>When run from CLI accept output of other programs as input and output tests as JSON so that other programs could consume it:</p>\n<pre><code>$ cat tests.txt | tests2json &gt;&gt; tests.json\n</code></pre><hr>\n<h2 id=\"solution\">Solution</h2>\n<hr>\n<h3 id=\"folder-structure\">Folder Structure</h3>\n<p>The <a href=\"https://github.com/wsierakowski/tests2json\">folder structure</a> is fairly standard, skipping the obvious things like .gitignore, LICENSE, README.md and package.json, the entry point for the module working as the command line tool is the <code>tests2json.js</code> file. The script internally loads the <code>lib/tests2json.js</code> module that is the actual logic that parses raw tests text. The test folder contains <a href=\"https://mochajs.org/\">mocha</a> test runner tests that use <a href=\"http://chaijs.com/\">chai</a> as the assertion library.</p>\n<pre><code class=\"lang-bash\">.\n&#x251C;&#x2500;&#x2500; .gitignore\n&#x251C;&#x2500;&#x2500; LICENSE\n&#x251C;&#x2500;&#x2500; README.md\n&#x251C;&#x2500;&#x2500; lib\n&#x2502;   &#x2514;&#x2500;&#x2500; tests2json.js\n&#x251C;&#x2500;&#x2500; package.json\n&#x251C;&#x2500;&#x2500; test\n&#x2502;   &#x251C;&#x2500;&#x2500; convert.js\n&#x2502;   &#x251C;&#x2500;&#x2500; get_options.js\n&#x2502;   &#x251C;&#x2500;&#x2500; get_question.js\n&#x2502;   &#x2514;&#x2500;&#x2500; split_raw_tests.js\n&#x2514;&#x2500;&#x2500; tests2json.js\n</code></pre>\n<hr>\n<h3 id=\"package-json\">Package.json</h3>\n<p>The <a href=\"https://github.com/wsierakowski/tests2json/blob/master/package.json\">package.json</a> file contents reveals that the only core dependency is the <a href=\"https://www.npmjs.com/package/commander\">commander</a> module that facilitates creating command-line interfaces:</p>\n<pre><code class=\"lang-json\">{\n  &quot;name&quot;: &quot;tests2json&quot;,\n  &quot;version&quot;: &quot;1.0.1&quot;,\n  &quot;description&quot;: &quot;Converts plain text tests to json&quot;,\n  &quot;main&quot;: &quot;lib/tests2json.js&quot;,\n  &quot;bin&quot;: {\n    &quot;tests2json&quot;: &quot;./tests2json.js&quot;\n  },\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;./node_modules/.bin/mocha --reporter spec test&quot;,\n    &quot;start&quot;: &quot;node tests2json.js&quot;\n  },\n  &quot;author&quot;: &quot;sigman.pl &lt;wojciech@sierakowski.eu&gt;&quot;,\n  &quot;license&quot;: &quot;MIT&quot;,\n  &quot;devDependencies&quot;: {\n    &quot;chai&quot;: &quot;^3.5.0&quot;,\n    &quot;mocha&quot;: &quot;^2.4.5&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;commander&quot;: &quot;^2.9.0&quot;\n  },\n  &quot;repository&quot;: {\n    &quot;type&quot;: &quot;git&quot;,\n    &quot;url&quot;: &quot;https://github.com/wsierakowski/tests2json.git&quot;\n  }\n}\n</code></pre>\n<p>The <code>main</code> property provides the entry point for the case the script is <strong>loaded as the module with the require function</strong>. When the user requires the module with <code>require(&apos;tests2json&apos;)</code>, the file specified as the value in this property is going to be loaded.</p>\n<p>The <a href=\"https://docs.npmjs.com/files/package.json#bin\"><code>bin</code> property</a> on the other hand is used to make the script available from the command line. The &apos;tests2json&apos; key tells the name of the tool and the value is a path to the entry point which in this case is the tests2json.js in the project root folder. What actually happens during the <code>npm install</code> of the module is npm will add an entry to the <em>PATH</em> environmental variable&apos;s and will create a symlink from the ./tests2json.js to usr/local/bin/tests2json (for global install with -g) or ./node_modules/.bin/tests2json (for local install).</p>\n<p>Another thing worth mentioning here is the <code>scripts</code> entry that enables the users to start the script using:</p>\n<pre><code class=\"lang-bash\">$ npm start\n</code></pre>\n<p>and run the tests using:</p>\n<pre><code class=\"lang-bash\">$npm tests\n</code></pre>\n<hr>\n<h3 id=\"the-command-line-entry-point-tests2json-js-https-github-com-wsierakowski-tests2json-blob-master-tests2json-js-\">The command line entry point <a href=\"https://github.com/wsierakowski/tests2json/blob/master/tests2json.js\">./tests2json.js</a></h3>\n<hr>\n<h4 id=\"make-module-command-line-executable\">Make module command line executable</h4>\n<p>To let the Node script run as any other script like bash, perl or python, we need to add the Node.js <a href=\"https://en.wikipedia.org/wiki/Shebang_%28Unix%29\">shebang</a> at the top of the script file to specify its environment.</p>\n<p>The shebang <code>#!</code> tells the system to pass the rest of the line after shebang to the interpreter, in other words when we run the script from the console, the system will run the /usr/bin/env and feed the contents of the file to the node interpreter. Node itself, like other scripting languages will ignore (will not interpret) the line that starts with shebang. An example of shebang for Perl: <code>#!/usr/bin/perl</code>.</p>\n<pre><code class=\"lang-js\">#!/usr/bin/env node\n</code></pre>\n<p>Once we make the file executable by providing executable permissions with <code>chmod</code>...</p>\n<pre><code class=\"lang-bash\">$ chmod u+x tests2json\n</code></pre>\n<p>...we should be able to run is as a script:</p>\n<pre><code class=\"lang-bash\">$ ./tests2json --version\n</code></pre>\n<p>But since we populated the <code>bin</code> property in the package.json and installed the module with <code>npn install</code> what made npm create the symlink for us, we can run the script globally:</p>\n<pre><code class=\"lang-bash\">$ tests2json --version\n</code></pre>\n<hr>\n<h4 id=\"find-out-if-input-comes-from-pipe-or-from-command-line-with-params\">Find out if input comes from pipe or from command line with params</h4>\n<p>We want our tool to support running in the two following ways:</p>\n<ol>\n<li>With parameters: <code>tests2json --input testsfile.txt</code></li>\n<li>With pipe so that the input comes as stdin: <code>cat testsfile.txt | tests2json</code></li>\n</ol>\n<p>Node allows to recognise this is with the <a href=\"https://nodejs.org/api/process.html#process_process_stdout\"><code>isTTY</code> property</a> available in the process.stdin which essentially checks if the script is run in the <a href=\"http://stackoverflow.com/questions/13388704/what-is-a-tty-and-how-can-i-enable-it-on-ubuntu\">TTY</a> context:</p>\n<pre><code class=\"lang-js\">if (process.stdin.isTTY) {\n  // Command line args - read args from process.argv\n} else {\n  // Pipe data - read from process.stdin\n}\n</code></pre>\n<hr>\n<h4 id=\"read-arguments-and-display-help\">Read arguments and display help</h4>\n<p>There are quite many options for reading parameters and values passed from the shell when executing the script.</p>\n<p>For the following execution:</p>\n<pre><code class=\"lang-bash\">$ tests2json -i tests.txt\n</code></pre>\n<p>we could read the parameters in the following way using the built in Node functions in the built-in <code>process</code> module:</p>\n<pre><code class=\"lang-js\">console.log(process.argv);\n\n// returns:\n// [&apos;node&apos;, &apos;tests2json&apos;, &apos;-i&apos;, &apos;tests.txt&apos;]\n\n// Remove two first values: the &apos;node&apos; and the file name of he executed script:\nvar args = process.argv.slice(2);\n</code></pre>\n<p>Since we want to be able to print tool help and also support short and long parameters, it might be easier to use one of the popular npm modules, my favourite is <a href=\"https://www.npmjs.com/package/commander\">commander</a>.</p>\n<pre><code class=\"lang-js\">var program = require(&apos;commander&apos;);\n\nprogram\n  .version(&apos;1.0.1&apos;)\n  .description(&apos;Converts tests in text format to json.&apos;)\n  .option(&apos;-i, --input &lt;value&gt;&apos;, &apos;Input tests text file.&apos;)\n  .option(&apos;-o, --output [value]&apos;, &apos;Output tests json file.&apos;)\n  .on(&apos;--help&apos;, function(){\n    console.log(&apos;  Alternatively you can pipe raw tests as input and output the json from the script.&apos;);\n    console.log(&apos;&apos;);\n    console.log(&apos;    $ cat tests.txt | tests2json &gt;&gt; tests.json&apos;);\n    console.log(&apos;&apos;);\n  })\n  .parse(process.argv);\n</code></pre>\n<p>Purpose of each of the functions:</p>\n<ul>\n<li><code>version</code> sets the application version number that will get printed when we execute the script with <code>-v</code>/<code>--version</code> (we could actually read it from package.json to have just one point of reference)</li>\n<li><code>description</code> provides app description that will be printed at the top of the help (we could read that from package.json as well)</li>\n<li><code>option</code> specifies the short and the long version for parameters, type of the values expected and the description for the help. The angle brackets denote this parameter is required, square brackets are for optional.</li>\n<li><code>on</code> responds to event, in this case this is the custom help message when the user calls with <code>-h</code>/<code>--help</code>. In the callback we just use console.log to print the lines to terminal. If we didn&apos;t use that event handler, commander would still print help generated by default based on the options provided by us.</li>\n</ul>\n<p>Here is how the help is generated using the above configuration:</p>\n<pre><code class=\"lang-bash\">$ tests2json --help\n\n  Usage: tests2json [options]\n\n  Converts tests in text format to json.\n\n  Options:\n\n    -h, --help            output usage information\n    -V, --version         output the version number\n    -i, --input &lt;value&gt;   Input tests text file.\n    -o, --output [value]  Output tests json file.\n\n  Alternatively you can pipe raw tests as input and output the json from the script.\n\n    $ cat tests.txt | tests2json &gt;&gt; tests.json\n</code></pre>\n<p>The script will expect the following parameters ( the output param is optional, if not provided, the results will be printed to console instead of saved to a file):</p>\n<pre><code class=\"lang-bash\">  $ tests2json -i tests.txt -o tests.json\n\n  $ tests2json --input tests.txt --output tests.json\n</code></pre>\n<p>To print the error message when a required parameter is missing...</p>\n<pre><code class=\"lang-bash\">$ tests2json\n\nError: Providing input tests text file is required.\n</code></pre>\n<p>...I&apos;m using the following code, where I&apos;m checking if the input property isn&apos;t null, or alternatively in the same way I could check if the value provided is of the right data type or expected format with a regex value. In case the input isn&apos;t right, the script will printing the error message followed by the full help message printed again (for user&apos;s convenience) with the <code>program.outputHelp()</code> function and finally the script will exit with code 1 to indicate an error back to the shell.</p>\n<pre><code class=\"lang-js\">if (!program.input) {\n    console.log(&apos;Error: Providing input tests text file is required.&apos;);\n    program.outputHelp();\n    process.exit(1);   \n  }\n</code></pre>\n<hr>\n<h4 id=\"read-piped-or-redirected-data\">Read piped or redirected data</h4>\n<p>Piping data between scripts is in the core of any *nix system. We want to allow output from other scripts to be piped as input to tests2json and we want to be able to pass the result to other apps, like in the example below when we read the contests of the tests.txt file with the <code>cat</code> utility, pipe it to our script and then redirect the results to the tests.json file using <code>&gt;&gt;</code>:</p>\n<pre><code class=\"lang-bash\">$ cat tests.txt | tests2json &gt;&gt; tests.json\n</code></pre>\n<p>Or redirected input:</p>\n<pre><code class=\"lang-bash\">$ cat tests2json &lt; tests.txt &gt;&gt; tests.json\n</code></pre>\n<p>In order to implement that in Node, first we need to ensure the standard input isn&apos;t in the TTY mode as mentioned earlier in this article. Then we need to start reading from the <a href=\"https://nodejs.org/api/process.html\">process.stdin</a> using the resume function, otherwise the script will exit without waiting for anything. After setting the utf8 encoding we are listening for the <code>data</code> event on the stdin to receive the piped data.</p>\n<pre><code class=\"lang-js\">process.stdin.resume();\nprocess.stdin.setEncoding(&quot;utf8&quot;);\nprocess.stdin.on(&quot;data&quot;, function(data){\n  // process received data here...\n}\n</code></pre>\n<hr>\n<h4 id=\"exit-codes\">Exit codes</h4>\n<p>A decent command line script should indicate whether there has been an error executing it or the process completed successfully. For this purpose we use the exit codes. You may have noticed earlier that we provided the exit code 1 when there has been an error condition (missing required input). When everything goes well, the process should finish execution with exit code 0.</p>\n<pre><code class=\"lang-js\">if (err) process.exit(1)\n\n// When complete:\nprocess.exit(0);\n</code></pre>\n<hr>\n<h4 id=\"signals\">Signals</h4>\n<p>Node applications can also listen to signals sent by the operating system, the process or the user. For example a signal might be sent by the user hitting <code>ctrl+c</code> (SIGINT) or another process (like <code>kill -9 pid</code>) sending the kill signal (SIGKILL/SIGSTOP/SIGTERM). List of signals and information on which are supported on Windows can be found in the node docs: <a href=\"https://nodejs.org/api/process.html\">https://nodejs.org/api/process.html</a>.</p>\n<p>Listening to particular signals is done in the following way:</p>\n<pre><code class=\"lang-js\">process.on(&apos;SIGINT&apos;, function () {\n  console.log(&apos;Received SIGINT!&apos;);\n  process.exit(0);\n});\n</code></pre>\n<p>If you find out the node&apos;s process ID, you can use it then to send the <code>SIGINT</code> signal:</p>\n<pre><code class=\"lang-bash\">$ ps aux | grep node\n\n$ kill -s SIGINT node_process_id\n</code></pre>\n</div></div></article><ul class=\"pager\"><li class=\"previous\"><a href=\"/\">&lt; Back to the blog</a></li></ul></div><div class=\"col-sm-4 col-md-3\"><div style=\"margin-top: 20px;\" class=\"panel panel-default\"><div class=\"panel-heading\"><h4 class=\"panel-title\">Latests Posts</h4></div><ul class=\"list-group\"><li class=\"list-group-item\"><a href=\"/posts/creating-command-line-tools-with-nodejs\">1. Creating command line tools with Node.js</a></li><li class=\"list-group-item\"><a href=\"/posts/couchdb-primer-part-2-design-documents-and-views\">2. CouchDB primer part 2 - design documents and views</a></li><li class=\"list-group-item\"><a href=\"/posts/couchdb-primer-part-1-the-basics\">3. CouchDB primer part 1 - the basics</a></li><li class=\"list-group-item\"><a href=\"/posts/markdown-basics\">4. Markdown basics</a></li><li class=\"list-group-item\"><a href=\"/posts/using-modules-and-dependency-management-in-javascript-applications-with-amd-require-js\">5. Using modules and dependency management in JavaScript applications with AMD - require.js</a></li></ul></div><div style=\"margin-top: 20px;\" class=\"panel panel-default\"><div class=\"panel-heading\"><h4 class=\"panel-title\">Popular Posts</h4></div><ul class=\"list-group\"><li class=\"list-group-item\"><a href=\"/posts/starting-with-air-for-android-and-ios-building-one-app-for-both-platforms\">1. Starting with AIR for Android and iOS - building one app for both platforms (49841)</a></li><li class=\"list-group-item\"><a href=\"/posts/building-mobile-games-in-adobe-air-techniques-used-in-jumping-droid\">2. Building mobile games in Adobe AIR - techniques used in Jumping Droid (43737)</a></li><li class=\"list-group-item\"><a href=\"/posts/building-ios-app-with-adobe-air-things-learnt-when-developing-colorbyshape-app\">3. Building iOS app with Adobe AIR - things learnt when developing ColorByShape app (29512)</a></li><li class=\"list-group-item\"><a href=\"/posts/simple-pathfinding-algorithm-in-actionscript-3\">4. Simple pathfinding algorithm in ActionScript 3 (9237)</a></li><li class=\"list-group-item\"><a href=\"/posts/box-2-d-basics-part-1\">5. Box2D basics - Part 1 (7584)</a></li></ul></div><div class=\"panel panel-default\"><div class=\"panel-heading\"><h4 class=\"panel-title\">Categories</h4></div><ul class=\"list-group\"><a href=\"/\" class=\"active list-group-item\">All</a><a href=\"/primers\" class=\"false list-group-item\">Primers (6)</a><a href=\"/tips\" class=\"false list-group-item\">Tips (5)</a><a href=\"/tutorials\" class=\"false list-group-item\">Tutorials (4)</a></ul></div><div class=\"panel panel-default\"><div class=\"panel-heading\"><h4 class=\"panel-title\">Tags</h4></div><div class=\"panel-body\"><ul class=\"list-inline\"><li><a href=\"/tags/couchdb\">CouchDB (2)</a></li><li><a href=\"/tags/regex\">RegEx (1)</a></li><li><a href=\"/tags/actionscript\">actionscript (8)</a></li><li><a href=\"/tags/architecture\">architecture (0)</a></li><li><a href=\"/tags/box-2-d\">box2d (1)</a></li><li><a href=\"/tags/databases\">databases (2)</a></li><li><a href=\"/tags/javascript\">javascript (3)</a></li><li><a href=\"/tags/keystonejs\">keystonejs (0)</a></li><li><a href=\"/tags/linux\">linux (3)</a></li><li><a href=\"/tags/mobile\">mobile (4)</a></li><li><a href=\"/tags/nodejs\">nodejs (1)</a></li><li><a href=\"/tags/nosql\">nosql (2)</a></li><li><a href=\"/tags/programming\">programming (7)</a></li></ul></div></div></div></div></div></div><footer id=\"footer\"><p class=\"text-center\"> \n&#xA9; sigman.pl 2016</p></footer><script src=\"/js/jquery/jquery-1.11.2.min.js\"></script><script src=\"/js/bootstrap/bootstrap-3.3.4.min.js\"></script><script src=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js\"></script>\n<script>hljs.initHighlightingOnLoad();</script></body></html>"
}
